******************************************************
* Math-Library
* Copyright  Dipl.-Ing.(FH) S.Franke 
******************************************************

****************************************************************
*
* Constants
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Const 1
B1 1 0 V={c0}
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT TIME 1
B1 1 0 V={time}
.ENDS

****************************************************************
*
* Summation-Functions
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT NEG 1 2
B1 2 0 V=-1*V(1,0)
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Bias 1 2
B1 2 0 V=V(1,0)+{K}
.ENDS


******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Add2 1 2 3
B1 3 0 V=V(1,0)+V(2,0)
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Sub2 1 2 3
B1 3 0 V=V(1,0)-V(2,0)
.ENDS

****************************************************************
*
* Multiplication-Functions
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT Gain 1 2
B1 2 0 V=V(1,0)*{K}
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Mul2 1 2 3
B1 3 0 V=V(1,0)*V(2,0)
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT INV 1 2
B1 2 0 V=1/V(1,0)
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Div2 1 2 3
B1 3 0 V=V(1,0)/V(2,0)
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Sqrt 1 2
B1 2 0 V=sqrt(V(1,0))
.ENDS

****************************************************************
*
* Logarithm-Functions
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT ln 1 2
B1 2 0 V=ln(V(1,0))
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT log10 1 2
B1 2 0 V=log10(V(1,0))
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT logN 1 2
B1 2 0 V=log10(V(1,0))/log10({N})
.ENDS

****************************************************************
*
* Exponential-Functions
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Pow2 1 2
B1 2 0 V=pow(V(1,0),2)
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT PowN 1 2
B1 2 0 V=pow(V(1,0),{N})
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Exp 1 2
B1 2 0 V=exp(V(1,0))
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT ExpN 1 2
B1 2 0 V=pow({N},V(1,0))
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Pow 1 2 3
B1 3 0 V=pow(V(1,0),V(2,0))
.ENDS

****************************************************************
*
* Trigometrik-Functions
*
****************************************************************
******************************************************
* Sinus-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Sin 1 2
B1 2 0 V=sin(V(1,0))
.ENDS

******************************************************
* Cosinus-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Cos 1 2
B1 2 0 V=cos(V(1,0))
.ENDS

******************************************************
* Tangens-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT Tan 1 2
B1 2 0 V=tan(V(1,0))
.ENDS

******************************************************
* Arcus-Sinus-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT aSin 1 2
B1 2 0 V=asin(V(1,0))
.ENDS

******************************************************
* Arcus-Cosinus-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT aCos 1 2
B1 2 0 V=acos(V(1,0))
.ENDS

******************************************************
* Arcus-Tangens-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT aTan 1 2
B1 2 0 V=atan(V(1,0))
.ENDS

******************************************************
* Four quadrant Arcus-Tangens-Function of y/x
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT aTan2 1 2 3
B1 3 0 V=atan2(V(2,0),V(1,0))
.ENDS

****************************************************************
*
* Integrals, Differentials
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT CDT 1 2
B1 2 0 V=ddt(V(1,0))
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT CIDT 1 2
B1 2 0 V=idt(V(1,0),{c0})
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT CIDTMOD 1 2 3
B1 2 0 V=idtmod(V(1,0),{c0},V(3,0))
.ENDS

****************************************************************
*
* Measurement tool's
*
****************************************************************
******************************************************
* Current-Meter
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT C-Meter 1 2 3
V1 1 2 0
B1 3 0 V=I(V1)
.ENDS

******************************************************
* Voltage-Meter
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT V-Meter 1 2 3
B1 3 0 V=V(1,2)
.ENDS

******************************************************
* Power-Meter
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT P-Meter 1 2 3 4
V1 1 2 0
B1 4 0 V=V(1,3)*I(V1)
.ENDS

******************************************************
* Energy-Meter
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT E-Meter 1 2 3 4
V1 1 2 0
B1 4 0 V=idt(V(1,3)*I(V1),{c0})
.ENDS

****************************************************************
*
* Sources
*
****************************************************************
******************************************************
* Current-Source
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT C-Source 1 2 3
B1 1 2 I=V(3,0)
.ENDS

******************************************************
* Voltage-Source
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT V-Source 1 2 3
B1 1 2 V=V(3,0)
.ENDS

****************************************************************
*
* Passive-Elements
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 05/2018
******************************************************
.SUBCKT PRes 1 2 3
V1 1 4 0
R1 4 5 1e-8
B1 5 2 V=I(V1)*V(3,0)
.ENDS

****************************************************************
*
* Mean-Functions
*
****************************************************************
******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2014
******************************************************
.SUBCKT Mean 1 2
B1 2 0 V=idt(V(1,0))/{time}
.ENDS

******************************************************
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2014
******************************************************
.SUBCKT RMS 1 2
B1 2 0 V=sqrt(idt(V(1,0)*V(1,0))/{time})
.ENDS

****************************************************************
*
* Discontinius-Functions
*
****************************************************************
******************************************************
* Absolute-Value-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT Abs 1 2
B1 2 0 V=abs(V(1,0))
.ENDS

******************************************************
* Saturation-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT Saturation 1 2
B1 2 0 V=limit(V(1,0),{x_max},{x_min})
.ENDS

******************************************************
* Slew-Rate-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT Slewrate 1 2
B1 2 0 V=idt(limit(ddt(V(1,0)),{m_max},{-m_max}),0)
.ENDS

******************************************************
* Signum-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT Sign 1 2
B1 2 0 V=sgn(V(1,0))
.ENDS

******************************************************
* Slew-Rate-Function
* Copyright  Dipl.-Ing.(FH) S.Franke 
* 06/2018
******************************************************
.SUBCKT uRamp 1 2
B1 2 0 V=uramp(V(1,0))
.ENDS

****************************************************************